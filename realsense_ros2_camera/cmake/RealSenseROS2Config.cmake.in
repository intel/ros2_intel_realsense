get_filename_component(RealSenseROS2_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
include(CMakeFindDependencyMacro)

list(APPEND CMAKE_MODULE_PATH ${RealSenseROS2_CMAKE_DIR})

# NOTE Had to use find_package because find_dependency does not support COMPONENTS or MODULE until 3.8.0

find_package(realsense2 REQUIRED)
find_package(image_transport REQUIRED)
find_package(OpenCV REQUIRED)

list(REMOVE_AT CMAKE_MODULE_PATH -1)

if(NOT TARGET RealSenseROS2::RealSenseROS2)
    include("${RealSenseROS2_CMAKE_DIR}/RealSenseROS2Targets.cmake")
endif()

set(RealSenseROS2_LIBRARIES RealSenseROS2::RealSenseROS2)
